{"ast":null,"code":"var _jsxFileName = \"/home/imane/Documents/M1/S2/Projet annuel/frontend/src/pages/ModifyProfile.tsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useEffect } from 'react';\nimport { useState } from 'react';\nimport toast from 'react-hot-toast';\nimport Axios from '../axios-config';\nimport icone from '../assets/profile-icon.png';\nimport { useAuthUser, useIsAuthenticated } from 'react-auth-kit'; // import { ChallengeListitem } from '../components/ChallengeListItem';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ModifyProfile = () => {\n  _s();\n\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [email, setEmail] = useState('');\n  const [image, setImage] = useState([]);\n  const getUser = useAuthUser();\n  const [user, setUser] = useState({});\n  const isAuth = useIsAuthenticated();\n  const userTest = getUser();\n  console.log(userTest);\n\n  async function save() {\n    const toastId = toast.loading('Creating user...');\n    Axios.post('/users', {\n      username,\n      password\n    }).then(({\n      data: {\n        content: {\n          access_token\n        }\n      }\n    }) => {\n      // const header: { alg: string, typ: string } = JSON.parse(atob(access_token.split('.')[0]))\n      const userInfo = JSON.parse(atob(access_token.split('.')[1]));\n      console.log(userInfo); // if (\n      //   signIn({\n      //     token: access_token,\n      //     expiresIn: 30,\n      //     tokenType: 'Bearer',\n      //     authState: userInfo,\n      //   })\n      // ) {\n      //   setRedirect(true);\n      //   toast.success(`Logged in successfuly as ${username} !`, {\n      //     id: toastId,\n      //   });\n      // } else {\n      //   throw new Error('Could not login.');\n      // }\n    }).catch(err => {\n      if (err.isAxiosError) {\n        toast.error(`Could not login: ${err.response.data.message}`, {\n          id: toastId\n        });\n      } else {\n        toast.error(`Could not login: ${err}`, {\n          id: toastId\n        });\n      }\n    });\n  } // useState(() => {\n  //   setUser(userTest?.content);\n  // });\n\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      Axios.get('/users').then(({\n        data\n      }) => {\n        data.content.map(userProfile => {\n          if ((userTest === null || userTest === void 0 ? void 0 : userTest.sub) == userProfile._id) setUser(userProfile);\n        });\n      }).catch(err => {\n        if (err.isAxiosError) {\n          toast.error(`Could not load profile: ${err.response.data.message}`);\n        } else {\n          toast.error(`Could not load profile: ${err}`);\n        }\n      });\n    };\n\n    fetchUsers();\n  }, []);\n\n  function onFileChange(e) {\n    var _e$target$files;\n\n    const files = [...image];\n\n    if (e.target.files && ((_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files.length) > 0) {\n      files.push(e.target.files[0]);\n    }\n\n    setImage(files);\n  }\n\n  function removeImage(index) {\n    const currentImages = [...image];\n    currentImages.splice(index, 1);\n    setImage(currentImages);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"v-auto text-center bg-gray-600 overflow-hidden\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      children: \"Profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-auto text-center bg-gray-600 rounded p-5 flex flex-col items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-5 gap-4 rounded m-5\",\n            children: [image.map((image, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-100 text-center bg-gray-600 rounded p-4 text-center overflow-hidden\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"absolute top-0 right-0 bg-blue-500 hover:bg-blue-700 py-1 px-3 rounded-bl-lg\",\n                onClick: _ => removeImage(index),\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-times\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex h-full\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  alt: \"user defined\",\n                  className: \"w-full max-h-full object-contain m-auto pb-4\",\n                  src: URL.createObjectURL(image)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 17\n              }, this)]\n            }, `image-${index}`, true, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 15\n            }, this)), /*#__PURE__*/_jsxDEV(\"img\", {\n              className: \"max-h-full h-20 object-contain bg-cover bg-center mx-auto\",\n              src: icone\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"w-32 flex flex-col items-center p-5 bg-blue-500 hover:bg-blue-700 rounded-md shadow-md tracking-wide cursor-pointer\",\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"fas fa-cloud-upload-alt fa-2x\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"mt-2 text-base \",\n              children: \"Browse\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              className: \"hidden\",\n              accept: \"image/*\",\n              onChange: onFileChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"username\",\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"text-black\",\n            alt: user.username,\n            type: \"text\",\n            name: \"username\",\n            placeholder: \"username\",\n            onChange: e => setUsername(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"text-black\",\n            alt: \"\",\n            type: \"password\",\n            name: \"password\",\n            placeholder: \"password\",\n            onChange: e => setPassword(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"text-black\",\n            type: \"text\",\n            name: \"email\",\n            placeholder: \"email\",\n            onChange: e => setEmail(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: e => save(),\n      type: \"button\",\n      className: \"bg-blue-500 rounded-lg px-6 py-2\",\n      children: \"Save\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ModifyProfile, \"gfpdfuQ/I2+LIDSJEB/ViP1IFR0=\", false, function () {\n  return [useAuthUser, useIsAuthenticated];\n});\n\n_c = ModifyProfile;\n\nvar _c;\n\n$RefreshReg$(_c, \"ModifyProfile\");","map":{"version":3,"sources":["/home/imane/Documents/M1/S2/Projet annuel/frontend/src/pages/ModifyProfile.tsx"],"names":["React","useEffect","useState","toast","Axios","icone","useAuthUser","useIsAuthenticated","ModifyProfile","username","setUsername","password","setPassword","email","setEmail","image","setImage","getUser","user","setUser","isAuth","userTest","console","log","save","toastId","loading","post","then","data","content","access_token","userInfo","JSON","parse","atob","split","catch","err","isAxiosError","error","response","message","id","fetchUsers","get","map","userProfile","sub","_id","onFileChange","e","files","target","length","push","removeImage","index","currentImages","splice","_","URL","createObjectURL","value"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useEffect } from 'react';\nimport { useState } from 'react';\nimport toast from 'react-hot-toast';\nimport Axios from '../axios-config';\nimport icone from '../assets/profile-icon.png';\nimport { useAuthUser, useIsAuthenticated } from 'react-auth-kit';\n\n// import { ChallengeListitem } from '../components/ChallengeListItem';\n\ntype ProfileAttributes = {\n  _id: string;\n  username: string;\n  // password: string;\n  email: string;\n  icone: string;\n};\n\nexport const ModifyProfile = () => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [email, setEmail] = useState('');\n  const [image, setImage] = useState([] as File[]);\n\n  const getUser = useAuthUser();\n  const [user, setUser] = useState({} as ProfileAttributes);\n  const isAuth = useIsAuthenticated();\n\n  const userTest = getUser();\n  console.log(userTest);\n\n  async function save() {\n    const toastId = toast.loading('Creating user...');\n    Axios.post('/users', { username, password })\n      .then(\n        ({\n          data: {\n            content: { access_token },\n          },\n        }) => {\n          // const header: { alg: string, typ: string } = JSON.parse(atob(access_token.split('.')[0]))\n          const userInfo: { username: string; sub: string; iat: number } =\n            JSON.parse(atob(access_token.split('.')[1]));\n          console.log(userInfo);\n          // if (\n          //   signIn({\n          //     token: access_token,\n          //     expiresIn: 30,\n          //     tokenType: 'Bearer',\n          //     authState: userInfo,\n          //   })\n          // ) {\n          //   setRedirect(true);\n          //   toast.success(`Logged in successfuly as ${username} !`, {\n          //     id: toastId,\n          //   });\n          // } else {\n          //   throw new Error('Could not login.');\n          // }\n        },\n      )\n      .catch((err) => {\n        if (err.isAxiosError) {\n          toast.error(`Could not login: ${err.response.data.message}`, {\n            id: toastId,\n          });\n        } else {\n          toast.error(`Could not login: ${err}`, { id: toastId });\n        }\n      });\n  }\n\n  // useState(() => {\n  //   setUser(userTest?.content);\n  // });\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      Axios.get('/users')\n        .then(({ data }) => {\n          data.content.map((userProfile: ProfileAttributes) => {\n            if(userTest?.sub == userProfile._id) setUser(userProfile)\n          })\n        })\n        .catch((err) => {\n          if (err.isAxiosError) {\n            toast.error(`Could not load profile: ${err.response.data.message}`);\n          } else {\n            toast.error(`Could not load profile: ${err}`);\n          }\n        });\n    };\n\n    fetchUsers();\n  }, []);\n\n  function onFileChange(e: React.ChangeEvent<HTMLInputElement>) {\n    const files = [...image];\n\n    if (e.target.files && e.target.files?.length > 0) {\n      files.push(e.target.files[0]);\n    }\n\n    setImage(files);\n  }\n\n  function removeImage(index: number) {\n    const currentImages = [...image];\n    currentImages.splice(index, 1);\n\n    setImage(currentImages);\n  }\n\n  return (\n    <div className=\"v-auto text-center bg-gray-600 overflow-hidden\">\n      <div className=\"header\">Profile</div>\n\n      <div className=\"content\">\n        <div className=\"form\">\n        <div className=\"h-auto text-center bg-gray-600 rounded p-5 flex flex-col items-center\">\n          {/*<div className=\"h-auto text-center bg-gray-600 rounded p-5\">*/}\n          <div className=\"grid grid-cols-5 gap-4 rounded m-5\">\n            {image.map((image, index) => (\n              <div\n                key={`image-${index}`}\n                className=\"h-100 text-center bg-gray-600 rounded p-4 text-center overflow-hidden\"\n              >\n                <button\n                  className=\"absolute top-0 right-0 bg-blue-500 hover:bg-blue-700 py-1 px-3 rounded-bl-lg\"\n                  onClick={(_) => removeImage(index)}\n                >\n                  <i className=\"fas fa-times\" />\n                </button>\n                <div className=\"flex h-full\">\n                  <img\n                    alt=\"user defined\"\n                    className=\"w-full max-h-full object-contain m-auto pb-4\"\n                    src={URL.createObjectURL(image)}\n                  />\n                </div>\n              </div>\n            ))}\n            <img\n              className=\"max-h-full h-20 object-contain bg-cover bg-center mx-auto\"\n              src={icone}\n            />\n          </div>\n\n          <label className=\"w-32 flex flex-col items-center p-5 bg-blue-500 hover:bg-blue-700 rounded-md shadow-md tracking-wide cursor-pointer\">\n            <i className=\"fas fa-cloud-upload-alt fa-2x\"></i>\n            <span className=\"mt-2 text-base \">Browse</span>\n            <input type=\"file\" className=\"hidden\" accept=\"image/*\" onChange={onFileChange} />\n          </label>\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"username\">Username</label>\n            <input\n              className=\"text-black\"\n              alt={user.username}\n              type=\"text\"\n              name=\"username\"\n              placeholder=\"username\"\n              onChange={(e) => setUsername(e.target.value)}\n            />\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"password\">Password</label>\n            <input\n              className=\"text-black\"\n              alt=\"\"\n              type=\"password\"\n              name=\"password\"\n              placeholder=\"password\"\n              onChange={(e) => setPassword(e.target.value)}\n            />\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"password\">Email</label>\n            <input\n              className=\"text-black\"\n              type=\"text\"\n              name=\"email\"\n              placeholder=\"email\"\n              onChange={(e) => setEmail(e.target.value)}\n            />\n          </div>\n        </div>\n      </div>\n      {/*<div className=\"footer\">\n        <Link to=\"/\" className=\"nav-links\"> */}\n        <button onClick={(e) => save()} type=\"button\" className=\"bg-blue-500 rounded-lg px-6 py-2\">\n          Save\n        </button>\n      {/*</div>*/}\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}